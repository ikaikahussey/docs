<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Collections | DADI Documentation</title>
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <link rel="stylesheet" type="text/css" href="http://dadi.tech/assets/css/main.min.css?v=3">
  <link rel="stylesheet" type="text/css" href="/type.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atom-one-dark.min.css" />
  <link rel="icon" type="image/png" href="http://dadi.tech/assets/img/favicon.png">
</head>
<body class="docs">
  <header class="alignc pad__top--x2 small cf"><nav><a href="https://dadi.tech/en/" class="inline-block marg__bottom"><img src="https://dadi.tech/assets/img/dadi-light.svg" width="150" height="35" alt="DADI" class="logo"></a><ol><li><a href="https://dadi.tech/en/">Technology</a></li><li><a href="https://dadi.tech/en/on-demand" onclick="ga('send','event','On demand','Click','Docsheader');">On demand</a></li><li><a href="https://dadi.tech/en/support" onclick="ga('send','event','Support','Click','Docsheader');">Support</a></li></ol><ul><li><a href="https://github.com/dadi/" onclick="ga('send','event','Github','Click','Docsheader');">Find us on Github</a></li><li><a href="http://docs.dadi.tech" class="on bg--blue" onclick="ga('send','event','Documentation','Click','Docsheader');">Documentation</a></li></ul></nav><div class="top__bg pattern" style="background-color: #21262d;" data-colors="#21262d,#1d2128,#191d23,#16191e,#121519,#0e1014,#0b0c0f,#07080a,#030405,#000000"></div></header>
    <div class="small">
      <div class="list--breadcrumb titlecase">
        <ul class="container">
        <li><a href="/">Documentation</a></li>
                <li class=""><a href="/api">API</a></li>
                <li class="fwb"><a href="/api/concepts">Concepts</a></li>
        </ul>
      </div>

      <div class="container">
        <div class="larger hdr">Collections</div>
      </div>
    </div>
  </div>
</div>

<main>

    <div class="container normal">
      <div class="grid">
        <div class="col w-3-4 pad__bottom--x2">
          <div class="cf bdr__bottom bdr--bdr-grey pad__bottom small marg__top">
              <div class="small fwb float--right w-1-2 alignr">
                <a href="https://github.com/jimlambie" target="_blank">
                  <img class="float--right pad__left--half" src="https://avatars2.githubusercontent.com/u/116263?v&#x3D;3" width="40" height="40">
                </a>
                <a class="block fwb">James Lambie</a>
                <span class="block txt--grey" title="Last updated: 2017-05-25T04:22:27Z">2017-05-25T04:22:27Z</span>
              </div>
            <div class="inline-block">
              <div class="block fwb">2123 words</div>
              <div class="txt--grey">8 min read</div>
            </div>
          </div>

          <div class="documentation">
            <h2 id="collection-specification">Collection Specification</h2>
<p>DADI API handles creation and modification of database collections in MongoDB directly. All that is required in order to create a new database collection and it’s associated collection endpoint is the creation of the collection specification file.</p>
<p>Collection specifications are simply JSON files stored in your application’s <code class="lang-gradle"><span class="hljs-regexp">/workspace/</span>collections</code> folder. It is important to understand how the folder hierarchy in the collections folder affects the behaviour of your API.</p>
<pre><code class="lang-bash">my-api/
  workspace/
    collections/                    
      <span class="hljs-number">1.0</span>/                          <span class="hljs-comment"># API version label</span>
        library/                    <span class="hljs-comment"># database name</span>
          collection.books.json     <span class="hljs-comment"># collection specification</span>

    endpoints/                      <span class="hljs-comment"># custom Javascript endpoints</span>
</code></pre>
<h3 id="api-version">API Version</h3>
<p>Specific versions of your API are represented by “version” folders within the collections folder. [MORE]</p>
<h3 id="database">Database</h3>
<p>Collection documents may be stored in separate databases, represented by the name of the folder within the “version” folder.</p>
<blockquote>
<p><strong>Note</strong> This feature is disabled by default. To enable separate databases in your API the configuration setting <code class="lang-css"><span class="hljs-tag">database</span><span class="hljs-class">.enableCollectionDatabases</span></code> must be <code class="lang-actionscript"><span class="hljs-literal">true</span></code>. See <a href="../../setup/configuration#collection-specific-databases">Collection-specific Databases</a> for more information.</p>
</blockquote>
<h3 id="collection">Collection</h3>
<p>Collection specifications exist as JSON files containing any number of field specifications and a configuration block. The naming convention for the collection specifications is <code class="lang-applescript">collection.&lt;collection <span class="hljs-property">name</span>&gt;.json</code> where <code class="lang-apache"><span class="hljs-tag">&lt;collection name&gt;</span></code> is used as the name of the collection in MongoDB.</p>
<h4 id="use-the-plural-form">Use the Plural Form</h4>
<p>We recommend you use the plural form for all collection endpoints to keep consistency across your API. Using the singular form means a GET request for a list of results can easily be confused with a request for a single entity.</p>
<p>For example, a collection named <code class="lang-stylus">book (collection<span class="hljs-class">.book</span><span class="hljs-class">.json</span>)</code> will accept GET requests at the following endpoints:</p>
<pre><code class="lang-groovy"><span class="hljs-string">http:</span><span class="hljs-comment">//api.example.com/1.0/library/book</span>
<span class="hljs-string">http:</span><span class="hljs-comment">//api.example.com/1.0/library/book/560a44b33a4d7de29f168ce4</span>
</code></pre><p>Is the first one going to return all books, as intended? It’s not obvious. Instead, using the plural form makes it clear what the endpoint’s intended behaviour is:</p>
<pre><code class="lang-groovy"><span class="hljs-string">http:</span><span class="hljs-comment">//api.example.com/1.0/library/books</span>
<span class="hljs-string">http:</span><span class="hljs-comment">//api.example.com/1.0/library/books/560a44b33a4d7de29f168ce4</span>
</code></pre><h5 id="collection-endpoint">Collection Endpoint</h5>
<p>With the above folder and file hierarchy a collection’s endpoint within the API uses the following format:</p>
<p><code class="lang-mathematica">http://api.example.com/<span class="hljs-list">{version}</span>/<span class="hljs-list">{database}</span>/<span class="hljs-list">{collection name}</span></code></p>
<p>In actual use this might look like the following:</p>
<p><code class="lang-groovy"><span class="hljs-string">http:</span><span class="hljs-comment">//api.example.com/1.0/library/books</span></code></p>
<h5 id="the-json-file">The JSON File</h5>
<p>Collection specification files take the following format:</p>
<pre><code class="lang-json">{
  "<span class="hljs-attribute">fields</span>": <span class="hljs-value">{
    "<span class="hljs-attribute">field1</span>": <span class="hljs-value">{

    }</span>,
    "<span class="hljs-attribute">field2</span>": <span class="hljs-value">{

    }
  </span>}</span>,
  "<span class="hljs-attribute">settings</span>": <span class="hljs-value">{

  }
</span>}
</code></pre>
<h2 id="field-specification">Field Specification</h2>
<p>Each field is defined in the following way:</p>
<pre><code class="lang-json">{
  "<span class="hljs-attribute">fieldName</span>": <span class="hljs-value">{
    "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"String"</span></span>,
    "<span class="hljs-attribute">label</span>": <span class="hljs-value"><span class="hljs-string">"Title"</span></span>,
    "<span class="hljs-attribute">comments</span>": <span class="hljs-value"><span class="hljs-string">"The title of the entry"</span></span>,
    "<span class="hljs-attribute">example</span>": <span class="hljs-value"><span class="hljs-string">"War and Peace"</span></span>,
    "<span class="hljs-attribute">matchType</span>": <span class="hljs-value"><span class="hljs-string">"exact"</span></span>,
    "<span class="hljs-attribute">validation</span>": <span class="hljs-value">{
      "<span class="hljs-attribute">minLength</span>": <span class="hljs-value"><span class="hljs-number">4</span></span>,
      "<span class="hljs-attribute">maxLength</span>": <span class="hljs-value"><span class="hljs-number">20</span></span>,
      "<span class="hljs-attribute">regex</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">pattern</span>": <span class="hljs-value"><span class="hljs-string">"/[A-Za-z0-9]*/"</span>
      </span>}
    </span>}</span>,
    "<span class="hljs-attribute">required</span>": <span class="hljs-value"><span class="hljs-literal">false</span></span>,
    "<span class="hljs-attribute">message</span>": <span class="hljs-value"><span class="hljs-string">"must not be blank"</span></span>,
    "<span class="hljs-attribute">default</span>": <span class="hljs-value"><span class="hljs-string">"Untitled"</span></span>,
    "<span class="hljs-attribute">placement</span>": <span class="hljs-value"><span class="hljs-string">"Main content"</span></span>,
    "<span class="hljs-attribute">display</span>": <span class="hljs-value">{
      "<span class="hljs-attribute">index</span>": <span class="hljs-value"><span class="hljs-literal">true</span></span>,
      "<span class="hljs-attribute">edit</span>": <span class="hljs-value"><span class="hljs-literal">true</span>
    </span>}
  </span>}
</span>}
</code></pre>
<table>
<thead>
<tr>
<th style="text-align:left">Property</th>
<th style="text-align:left">Description</th>
<th style="text-align:left">Introduced</th>
<th style="text-align:left">Default</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">fieldName</td>
<td style="text-align:left">The name of the field</td>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
<td><code class="lang-1c"><span class="hljs-string">"title"</span></code></td>
</tr>
<tr>
<td style="text-align:left">type</td>
<td style="text-align:left">The type of the field. Possible values <code class="lang-1c"><span class="hljs-string">"String"</span></code>, <code class="lang-1c"><span class="hljs-string">"Number"</span></code>, <code class="lang-1c"><span class="hljs-string">"Boolean"</span></code>, <code class="lang-1c"><span class="hljs-string">"Mixed"</span></code>, <code class="lang-1c"><span class="hljs-string">"Object"</span></code>, <code class="lang-1c"><span class="hljs-string">"ObjectID"</span></code>, <code class="lang-1c"><span class="hljs-string">"Reference"</span></code></td>
<td style="text-align:left">1.0.0</td>
<td style="text-align:left"></td>
<td><code class="lang-1c"><span class="hljs-string">"String"</span></code></td>
</tr>
<tr>
<td style="text-align:left">label</td>
<td style="text-align:left">The label for the field</td>
<td style="text-align:left">1.0.0</td>
<td style="text-align:left"></td>
<td><code class="lang-1c"><span class="hljs-string">"Title"</span></code></td>
</tr>
<tr>
<td style="text-align:left">comments</td>
<td style="text-align:left">The description of the field</td>
<td style="text-align:left">1.0.0</td>
<td style="text-align:left"></td>
<td><code class="lang-1c"><span class="hljs-string">"The article title"</span></code></td>
</tr>
<tr>
<td style="text-align:left">example</td>
<td style="text-align:left">An example value for the field</td>
<td style="text-align:left">1.0.0</td>
<td style="text-align:left"></td>
<td><code class="lang-1c"><span class="hljs-string">"War and Peace"</span></code></td>
</tr>
<tr>
<td style="text-align:left">placement</td>
<td style="text-align:left">Determines where to display the field in the backend interface</td>
<td style="text-align:left">1.0.0</td>
<td style="text-align:left"></td>
<td><code class="lang-1c"><span class="hljs-string">"Main content"</span></code></td>
</tr>
<tr>
<td style="text-align:left">validation</td>
<td style="text-align:left">Validation rules, including minimum and maximum length and regular expression patterns.</td>
<td style="text-align:left">1.3.0</td>
<td style="text-align:left"></td>
<td></td>
</tr>
<tr>
<td style="text-align:left">validation.minLength</td>
<td style="text-align:left">The minimum length for the field.</td>
<td style="text-align:left">1.3.0</td>
<td style="text-align:left">unlimited</td>
<td><code class="lang-cpp"><span class="hljs-number">4</span></code></td>
</tr>
<tr>
<td style="text-align:left">validation.maxLength</td>
<td style="text-align:left">The maximum length for the field.</td>
<td style="text-align:left">1.3.0</td>
<td style="text-align:left">unlimited</td>
<td><code class="lang-cpp"><span class="hljs-number">20</span></code></td>
</tr>
<tr>
<td style="text-align:left">validation.regex</td>
<td style="text-align:left">A regular expression the field’s value must match</td>
<td style="text-align:left">1.3.0</td>
<td style="text-align:left"></td>
<td><code class="lang-json">{ "<span class="hljs-attribute">pattern</span>": <span class="hljs-value">/[A-Z]*/ </span>}</code></td>
</tr>
<tr>
<td style="text-align:left">required</td>
<td style="text-align:left">If true, a value must be entered for the field.</td>
<td style="text-align:left">1.0.0</td>
<td style="text-align:left"><code class="lang-actionscript"><span class="hljs-literal">false</span></code></td>
<td><code class="lang-actionscript"><span class="hljs-literal">true</span></code></td>
</tr>
<tr>
<td style="text-align:left">message</td>
<td style="text-align:left">The message to return if field validation fails.</td>
<td style="text-align:left">1.0.0</td>
<td style="text-align:left"><code class="lang-1c"><span class="hljs-string">"is invalid"</span></code></td>
<td><code class="lang-1c"><span class="hljs-string">"must contain uppercase letters only"</span></code></td>
</tr>
<tr>
<td style="text-align:left">default</td>
<td style="text-align:left">An optional value to use as a default if no value is supplied for this field</td>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
<td><code class="lang-1c"><span class="hljs-string">"0"</span></code></td>
</tr>
<tr>
<td style="text-align:left">display</td>
<td style="text-align:left">Determines in which view states the field should be visible within the backend interface</td>
<td style="text-align:left">1.0.0</td>
<td style="text-align:left"></td>
<td><code class="lang-json">{ "<span class="hljs-attribute">index</span>": <span class="hljs-value"><span class="hljs-literal">true</span></span>, "<span class="hljs-attribute">edit</span>": <span class="hljs-value"><span class="hljs-literal">false</span> </span>}</code></td>
</tr>
<tr>
<td style="text-align:left">matchType</td>
<td style="text-align:left">Specify the type of query that is performed when using this field. If “exact” then API will attempt to match the query value exactly, otherwise it will performa a case-insensitive query.</td>
<td style="text-align:left">1.14.0</td>
<td style="text-align:left"></td>
<td><code class="lang-1c"><span class="hljs-string">"exact"</span></code></td>
</tr>
<tr>
<td style="text-align:left">validationRule</td>
<td style="text-align:left">Replaced by <code>validation</code></td>
<td style="text-align:left">removed 1.8.2</td>
<td style="text-align:left"></td>
<td></td>
</tr>
<tr>
<td style="text-align:left">limit</td>
<td style="text-align:left">Replaced by <code>validation</code></td>
<td style="text-align:left">removed 1.8.2</td>
<td style="text-align:left"></td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="field-types">Field Types</h2>
<h3 id="string">String</h3>
<h3 id="number">Number</h3>
<h3 id="boolean">Boolean</h3>
<h3 id="mixed">Mixed</h3>
<h3 id="object">Object</h3>
<h3 id="objectid">ObjectID</h3>
<h3 id="reference">Reference</h3>
<p>See <a href="#document-composition">Document Composition (reference fields)</a> for further information.</p>
<h2 id="collection-settings">Collection Settings</h2>
<p>Default values for the collection endpoint are set the following way:</p>
<pre><code class="lang-json">{
  "<span class="hljs-attribute">settings</span>": <span class="hljs-value">{
    "<span class="hljs-attribute">cache</span>": <span class="hljs-value"><span class="hljs-literal">true</span></span>,
    "<span class="hljs-attribute">authenticate</span>": <span class="hljs-value"><span class="hljs-literal">true</span></span>,
    "<span class="hljs-attribute">count</span>": <span class="hljs-value"><span class="hljs-number">40</span></span>,
    "<span class="hljs-attribute">sort</span>": <span class="hljs-value"><span class="hljs-string">"title"</span></span>,
    "<span class="hljs-attribute">sortOrder</span>": <span class="hljs-value"><span class="hljs-number">1</span></span>,
    "<span class="hljs-attribute">callback</span>": <span class="hljs-value"><span class="hljs-literal">null</span></span>,
    "<span class="hljs-attribute">defaultFilters</span>": <span class="hljs-value"><span class="hljs-literal">null</span></span>,
    "<span class="hljs-attribute">fieldLimiters</span>": <span class="hljs-value"><span class="hljs-literal">null</span></span>,
    "<span class="hljs-attribute">storeRevisions</span>": <span class="hljs-value"><span class="hljs-literal">false</span></span>,
    "<span class="hljs-attribute">revisionCollection</span>": <span class="hljs-value"><span class="hljs-literal">null</span></span>,
    "<span class="hljs-attribute">index</span>": <span class="hljs-value">[]
  </span>}
</span>}
</code></pre>
<table>
<thead>
<tr>
<th style="text-align:left">Property</th>
<th style="text-align:left">Description</th>
<th style="text-align:left">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">cache</td>
<td style="text-align:left">If true, caching is enabled for this collection. The global config must also have <code class="lang-groovy"><span class="hljs-string">cache:</span> <span class="hljs-literal">true</span></code> for caching to be enabled</td>
<td style="text-align:left"><code class="lang-actionscript"><span class="hljs-literal">true</span></code></td>
</tr>
<tr>
<td style="text-align:left">authenticate</td>
<td style="text-align:left"></td>
<td style="text-align:left"><code class="lang-actionscript"><span class="hljs-literal">true</span></code></td>
</tr>
<tr>
<td style="text-align:left">count</td>
<td style="text-align:left">The number of results to return when querying the collection</td>
<td style="text-align:left"><code class="lang-cpp"><span class="hljs-number">40</span></code></td>
</tr>
<tr>
<td style="text-align:left">sort</td>
<td style="text-align:left">The default field to sort results by</td>
<td style="text-align:left"><code class="lang-1c"><span class="hljs-string">"title"</span></code></td>
</tr>
<tr>
<td style="text-align:left">sortOrder</td>
<td style="text-align:left">The sort direction to sort results by</td>
<td style="text-align:left"><code class="lang-cpp"><span class="hljs-number">1</span></code> = ascending, <code class="lang-cpp">-<span class="hljs-number">1</span></code> = descending</td>
</tr>
<tr>
<td style="text-align:left">callback</td>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
</tr>
<tr>
<td style="text-align:left">defaultFilters</td>
<td style="text-align:left">A default set of filters to query the collection by</td>
<td style="text-align:left"><code class="lang-json">{ "<span class="hljs-attribute">publishState</span>": <span class="hljs-value"><span class="hljs-literal">true</span> </span>}</code></td>
</tr>
<tr>
<td style="text-align:left">fieldLimiters</td>
<td style="text-align:left">A default set of fields to return</td>
<td style="text-align:left"><code class="lang-json">{ "<span class="hljs-attribute">title</span>": <span class="hljs-value"><span class="hljs-number">1</span></span>, "<span class="hljs-attribute">author</span>": <span class="hljs-value"><span class="hljs-number">1</span> </span>}</code></td>
</tr>
<tr>
<td style="text-align:left">index</td>
<td style="text-align:left"></td>
<td style="text-align:left"></td>
<td><code class="lang-json">{ "<span class="hljs-attribute">keys</span>": <span class="hljs-value">{ "<span class="hljs-attribute">username</span>": <span class="hljs-value"><span class="hljs-number">1</span> </span>}</span>, "<span class="hljs-attribute">options</span>": <span class="hljs-value">{ "<span class="hljs-attribute">unique</span>": <span class="hljs-value"><span class="hljs-literal">true</span> </span>} </span>}</code></td>
</tr>
</tbody>
</table>
<blockquote>
<p>It is possible to override some of these values when requesting data from the endpoint, by using querystring parameters. See <a href="./querying">Querying a collection</a> for detailed documentation.</p>
</blockquote>
<h3 id="defaultfilters">defaultFilters</h3>
<p>Specifies a default query for the collection.</p>
<pre><code class="lang-avrasm"><span class="hljs-label">defaultFilters:</span> { <span class="hljs-string">"publishState"</span>: <span class="hljs-string">"published"</span> }
</code></pre><p>A <code class="lang-golo"><span class="hljs-keyword">filter</span></code> parameter passed in a query will extend the default filters. For example the following request would extend the default filters and the database query would reflect both the defaults and the filters passed in the querystring:</p>
<pre><code class="lang-livecodeserver"><span class="hljs-keyword">http</span>://api.example.com/<span class="hljs-number">1.0</span>/magazine/articles?<span class="hljs-built_in">filter</span>={<span class="hljs-string">"magazineTitle"</span>:<span class="hljs-string">"Vogue"</span>}

{ <span class="hljs-string">"publishState"</span>: <span class="hljs-string">"published"</span>, <span class="hljs-string">"magazineTitle"</span>: <span class="hljs-string">"Vogue"</span> }
</code></pre><h3 id="fieldlimiters">fieldLimiters</h3>
<p>Specifies a default list of fields for inclusion/exclusion. Fields can be included or excluded, but not both.</p>
<h4 id="selecting-fields-for-inclusion">Selecting fields for inclusion</h4>
<p>For example to include only <code class="lang-applescript"><span class="hljs-property">name</span></code> and <code>email</code>:</p>
<pre><code class="lang-cpp">fieldLimiters: {<span class="hljs-string">"name"</span>:<span class="hljs-number">1</span>, <span class="hljs-string">"email"</span>: <span class="hljs-number">1</span>}
</code></pre><p>The <code class="lang-objectivec">_<span class="hljs-keyword">id</span></code> field is returned by default and is the only field which can be excluded in a list of included fields. To exclude the <code class="lang-objectivec">_<span class="hljs-keyword">id</span></code> field:</p>
<pre><code class="lang-cpp">fieldLimiters: {<span class="hljs-string">"name"</span>:<span class="hljs-number">1</span>, <span class="hljs-string">"email"</span>: <span class="hljs-number">1</span>, <span class="hljs-string">"_id"</span>: <span class="hljs-number">0</span>}
</code></pre><p>Attempting to mix included with excluded results in a MongoDB error:</p>
<pre><code class="lang-cpp">fieldLimiters: {<span class="hljs-string">"name"</span>:<span class="hljs-number">1</span>, <span class="hljs-string">"email"</span>: <span class="hljs-number">0</span>}
</code></pre><h4 id="selecting-fields-for-exclusion">Selecting fields for exclusion</h4>
<p>To exclude fields, list only the fields for exclusion:</p>
<pre><code class="lang-cpp">fieldLimiters: {<span class="hljs-string">"name"</span>:<span class="hljs-number">0</span>, <span class="hljs-string">"email"</span>: <span class="hljs-number">0</span>}
</code></pre><h2 id="validation">Validation</h2>
<p>Documents sent to the API with POST and PUT requests are validated at field level based on the rules defined in the collection schema. Find more information in the <a href="../validation">Validation</a> section.</p>
<h2 id="database-indexes">Database Indexes</h2>
<p>Indexes provide high performance read operations for frequently used queries and are fundamental in ensuring performance under load and at scale.</p>
<p>Database indexes can be automatically created for a collection by specifying the fields to be indexed in the <code>settings</code> object. An index will be created on the collection using the fields specified in the <code class="lang-perl"><span class="hljs-keyword">index</span>.<span class="hljs-keyword">keys</span></code> setting. A value of <code class="lang-css"><span class="hljs-tag">keys</span>: <span class="hljs-rules">{ <span class="hljs-rule"><span class="hljs-attribute">fieldName</span>:<span class="hljs-value"> <span class="hljs-number">1</span> </span></span></span>}</code> will create an index for field <code>fieldName</code> using an ascending order. <code class="lang-css"><span class="hljs-tag">keys</span>: <span class="hljs-rules">{ <span class="hljs-rule"><span class="hljs-attribute">fieldName</span>:<span class="hljs-value"> -<span class="hljs-number">1</span> </span></span></span>}</code> will create an index for field <code>fieldName</code> using a descending order. Specifying multiple fields will create a compound index.</p>
<p>The index will be created in the background to avoid blocking other database operations.</p>
<h3 id="settings-index">settings.index</h3>
<pre><code class="lang-json"><span class="hljs-string">"settings"</span>: {
  "<span class="hljs-attribute">cache</span>": <span class="hljs-value"><span class="hljs-literal">true</span></span>,
  "<span class="hljs-attribute">index</span>": <span class="hljs-value">{
    "<span class="hljs-attribute">enabled</span>": <span class="hljs-value"><span class="hljs-literal">true</span></span>,
    "<span class="hljs-attribute">keys</span>": <span class="hljs-value">{
      "<span class="hljs-attribute">field1</span>": <span class="hljs-value"><span class="hljs-number">1</span></span>,
      "<span class="hljs-attribute">field2</span>": <span class="hljs-value">-<span class="hljs-number">1</span>
    </span>}
  </span>}
</span>}
</code></pre>
<h2 id="document-revision-history">Document Revision History</h2>
<h3 id="settings-storerevisions">settings.storeRevisions</h3>
<p>If <code class="lang-css"><span class="hljs-tag">settings</span><span class="hljs-class">.storeRevisions</span></code> is <strong>true</strong>:</p>
<ul>
<li>a <code class="lang-armasm"><span class="hljs-keyword">revision </span>collection</code> will automatically be generated in the database when the first document for the collection is created</li>
<li>a <code class="lang-armasm"><span class="hljs-keyword">revision </span>document</code> will be stored in the <code class="lang-armasm"><span class="hljs-keyword">revision </span>collection</code> when a new document is created</li>
<li>a <code class="lang-armasm"><span class="hljs-keyword">revision </span>document</code> will be stored for each subsequent update to an existing document</li>
<li>each time a <code class="lang-armasm"><span class="hljs-keyword">revision </span>document</code> is created, the <code class="lang-objectivec">_<span class="hljs-keyword">id</span></code> of the <code class="lang-armasm"><span class="hljs-keyword">revision </span>document</code> is pushed onto a <code class="lang-bash"><span class="hljs-built_in">history</span></code> array of the original document</li>
</ul>
<h3 id="settings-revisioncollection">settings.revisionCollection</h3>
<p>If <code class="lang-css"><span class="hljs-tag">settings</span><span class="hljs-class">.revisionCollection</span></code> is specified, the collection’s <code class="lang-armasm"><span class="hljs-keyword">revision </span>collection</code> will be named according to the specified value, otherwise the collection’s <code class="lang-armasm"><span class="hljs-keyword">revision </span>collection</code> will take the form <code class="lang-applescript">{collection <span class="hljs-property">name</span>}History</code>.</p>
<p>For example:</p>
<p><code class="lang-stylus">db<span class="hljs-class">.books</span><span class="hljs-class">.find</span>()</code></p>
<p>Main document stored in the collection, with revisions referenced in the history array:</p>
<pre><code class="lang-json">{
  "<span class="hljs-attribute">_id</span>": <span class="hljs-value">ObjectId(<span class="hljs-string">"548efd7687fd8b50f3dca6e5"</span>)</span>,
  "<span class="hljs-attribute">title</span>": <span class="hljs-value"><span class="hljs-string">"War and Peace"</span></span>,
  "<span class="hljs-attribute">history</span>": <span class="hljs-value">[
    ObjectId(<span class="hljs-string">"548efd7687fd8b50f3dca6e6"</span>),
    ObjectId(<span class="hljs-string">"548efd7687fd8b50f3dca6e7"</span>)
  ]
</span>}
</code></pre>
<p><code class="lang-stylus">db<span class="hljs-class">.booksHistory</span><span class="hljs-class">.find</span>()</code></p>
<p>Two revision documents stored in the revision collection, one created at the same time as the original document was created, the second created after an update operation to change the value of <code class="lang-dos"><span class="hljs-built_in">title</span></code>:</p>
<pre><code class="lang-json">{
  "<span class="hljs-attribute">_id</span>": <span class="hljs-value">ObjectId(<span class="hljs-string">"548efd7687fd8b50f3dca6e6"</span>)</span>,
  "<span class="hljs-attribute">title</span>": <span class="hljs-value"><span class="hljs-string">"Draft"</span>
</span>}

{
  "<span class="hljs-attribute">_id</span>": <span class="hljs-value">ObjectId(<span class="hljs-string">"548efd7687fd8b50f3dca6e7"</span>)</span>,
  "<span class="hljs-attribute">title</span>": <span class="hljs-value"><span class="hljs-string">"War and Peace"</span></span>,
  "<span class="hljs-attribute">history</span>": <span class="hljs-value">[
    ObjectId(<span class="hljs-string">"548efd7687fd8b50f3dca6e6"</span>)
  ]
</span>}
</code></pre>
<blockquote>
<p><strong>Note:</strong> DADI API does not add or update any date/time fields to indicate the order in which revision documents were created, nor does it perform any sort operations when returning a document’s revision history. It is up to the API consumer to include appropriate date/time fields and perform sort operations on the returned revision collection.</p>
</blockquote>
<h2 id="document-composition">Document Composition</h2>
<p>To reduce data duplication through document embedding, DADI API allows the use of “Reference” fields which can best be described as pointers to other documents. The referenced document could be in the same collection, another collection in the same database or a collection in a different database.</p>
<h3 id="reference-field-settings">Reference Field Settings</h3>
<table>
<thead>
<tr>
<th style="text-align:left">Property</th>
<th style="text-align:left">Description</th>
<th style="text-align:left">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">database</td>
<td style="text-align:left">The name of the database that holds the reference data. Can be omitted if the field references data in the same <strong>database</strong> as the referring document.</td>
<td style="text-align:left"><code class="lang-1c"><span class="hljs-string">"title"</span></code></td>
</tr>
<tr>
<td style="text-align:left">collection</td>
<td style="text-align:left">The name of the collection that holds the reference data. Can be omitted if the field references data in the same <strong>collection</strong> as the referring document.</td>
<td style="text-align:left"><code class="lang-1c"><span class="hljs-string">"title"</span></code></td>
</tr>
<tr>
<td style="text-align:left">fields</td>
<td style="text-align:left">An array of fields to return for each referenced document.</td>
<td style="text-align:left"><code class="lang-json">[<span class="hljs-string">"firstName"</span>, <span class="hljs-string">"lastName"</span>]</code></td>
</tr>
</tbody>
</table>
<h3 id="example">Example</h3>
<p>Consider the following two collections, <code>books</code> and <code>people</code>. <code>books</code> contains a Reference field <code>author</code> which is capable of loading documents from the <code>people</code> collection. By creating a <code class="lang-inform7"><span class="hljs-title">book</span></code> document and setting the <code>author</code> field to the <code class="lang-objectivec">_<span class="hljs-keyword">id</span></code> value of a document from the <code>people</code> collection, the application is able to resolve this reference and return the <code>author</code> document within a result set for a <code>books</code> query.</p>
<h4 id="books-collection-books-json-">Books <code class="lang-stylus">(collection<span class="hljs-class">.books</span><span class="hljs-class">.json</span>)</code></h4>
<pre><code class="lang-json">{
  "<span class="hljs-attribute">fields</span>": <span class="hljs-value">{
    "<span class="hljs-attribute">title</span>": <span class="hljs-value">{
      "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"String"</span></span>,
      "<span class="hljs-attribute">required</span>": <span class="hljs-value"><span class="hljs-literal">true</span>
    </span>}</span>,
    "<span class="hljs-attribute">author</span>": <span class="hljs-value">{
      "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"Reference"</span></span>,
      "<span class="hljs-attribute">settings</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">collection</span>": <span class="hljs-value"><span class="hljs-string">"people"</span></span>,
        "<span class="hljs-attribute">fields</span>": <span class="hljs-value">[<span class="hljs-string">"firstName"</span>, <span class="hljs-string">"lastName"</span>]
      </span>}
    </span>}</span>,
    "<span class="hljs-attribute">booksInSeries</span>": <span class="hljs-value">{
      "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"Reference"</span>
    </span>}
  </span>}</span>,
  "<span class="hljs-attribute">settings</span>": <span class="hljs-value">{
    "<span class="hljs-attribute">cache</span>": <span class="hljs-value"><span class="hljs-literal">true</span></span>,
    "<span class="hljs-attribute">count</span>": <span class="hljs-value"><span class="hljs-number">40</span></span>,
    "<span class="hljs-attribute">sort</span>": <span class="hljs-value"><span class="hljs-string">"title"</span></span>,
    "<span class="hljs-attribute">sortOrder</span>": <span class="hljs-value"><span class="hljs-number">1</span>
  </span>}
</span>}
</code></pre>
<h4 id="people-collection-people-json-">People <code class="lang-stylus">(collection<span class="hljs-class">.people</span><span class="hljs-class">.json</span>)</code></h4>
<pre><code class="lang-json">{
  "<span class="hljs-attribute">fields</span>": <span class="hljs-value">{
    "<span class="hljs-attribute">name</span>": <span class="hljs-value">{
      "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"String"</span></span>,
      "<span class="hljs-attribute">required</span>": <span class="hljs-value"><span class="hljs-literal">true</span>
    </span>}</span>,
    "<span class="hljs-attribute">occupation</span>":    <span class="hljs-value">{
      "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"String"</span></span>,
      "<span class="hljs-attribute">required</span>": <span class="hljs-value"><span class="hljs-literal">false</span>
    </span>}</span>,
    "<span class="hljs-attribute">nationality</span>": <span class="hljs-value">{
      "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"String"</span></span>,
      "<span class="hljs-attribute">required</span>": <span class="hljs-value"><span class="hljs-literal">false</span>
    </span>}</span>,
    "<span class="hljs-attribute">education</span>": <span class="hljs-value">{
      "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"String"</span></span>,
      "<span class="hljs-attribute">required</span>": <span class="hljs-value"><span class="hljs-literal">false</span>
    </span>}</span>,
    "<span class="hljs-attribute">spouse</span>": <span class="hljs-value">{
      "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"Reference"</span>
    </span>}
  </span>}</span>,
  "<span class="hljs-attribute">settings</span>": <span class="hljs-value">{
    "<span class="hljs-attribute">cache</span>": <span class="hljs-value"><span class="hljs-literal">true</span></span>,
    "<span class="hljs-attribute">count</span>": <span class="hljs-value"><span class="hljs-number">40</span></span>,
    "<span class="hljs-attribute">sort</span>": <span class="hljs-value"><span class="hljs-string">"name"</span></span>,
    "<span class="hljs-attribute">sortOrder</span>": <span class="hljs-value"><span class="hljs-number">1</span>
  </span>}
</span>}
</code></pre>
<h5 id="composed">Composed</h5>
<p>An additional <code>composed</code> property is added to the <code class="lang-inform7"><span class="hljs-title">book</span></code> document when it is returned, indicating which fields have been expanded. The property contains the original <code class="lang-objectivec">_<span class="hljs-keyword">id</span></code> value used for the reference field lookup.</p>
<h5 id="enabling-composition">Enabling Composition</h5>
<blockquote>
<p>Composition is disabled by default.</p>
</blockquote>
<p>To return a document with resolved Reference fields at the top level, you may send a parameter either in the querystring of your request or provide it as an option to the collection’s <code class="lang-stylus"><span class="hljs-function"><span class="hljs-title">find</span><span class="hljs-params">()</span></span></code> method:</p>
<pre><code class="lang-vbscript"><span class="hljs-keyword">GET</span> /<span class="hljs-number">1.0</span>/library/books?<span class="hljs-built_in">filter</span>={<span class="hljs-string">"_id"</span>:<span class="hljs-string">"560a5baf320039f7d6a78d3b"</span>}&amp;compose=<span class="hljs-literal">true</span>
</code></pre><pre><code class="lang-javascript"><span class="hljs-keyword">var</span> books = model(<span class="hljs-string">'books'</span>)

books.find({ title: <span class="hljs-string">"Harry Potter 2"</span> }, { <span class="hljs-string">"compose"</span>: <span class="hljs-literal">true</span> }, <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">err, result</span>) </span>{
  <span class="hljs-comment">// do something with result</span>
});
</code></pre>
<p>This setting will allow the first level of Reference fields to be resolved. To allow Reference fields to resolve which are nested further within the document, add a <code>compose</code> property to the collection specification’s settings block:</p>
<pre><code class="lang-json">{
  "<span class="hljs-attribute">fields</span>": <span class="hljs-value">{
  }</span>,
  "<span class="hljs-attribute">settings</span>": <span class="hljs-value">{
    "<span class="hljs-attribute">compose</span>": <span class="hljs-value"><span class="hljs-literal">true</span>
  </span>}
</span>}
</code></pre>
<h5 id="a-book-document">a <code class="lang-inform7"><span class="hljs-title">book</span></code> document</h5>
<pre><code class="lang-json">[
  {
    "<span class="hljs-attribute">_id</span>": <span class="hljs-value"><span class="hljs-string">"daf35614-918f-11e5-8994-feff819cdc9f"</span></span>,
    "<span class="hljs-attribute">title</span>": <span class="hljs-value"><span class="hljs-string">"Harry Potter and the Philosopher's Stone"</span></span>,
    "<span class="hljs-attribute">author</span>": <span class="hljs-value"><span class="hljs-string">"7602d576-9190-11e5-8994-feff819cdc9f"</span></span>,
    "<span class="hljs-attribute">booksInSeries</span>": <span class="hljs-value">[
      <span class="hljs-string">"daf35998-918f-11e5-8994-feff819cdc9f"</span>,
      <span class="hljs-string">"daf35b82-918f-11e5-8994-feff819cdc9f"</span>,
      <span class="hljs-string">"daf35f88-918f-11e5-8994-feff819cdc9f"</span>,
      <span class="hljs-string">"daf36172-918f-11e5-8994-feff819cdc9f"</span>,
      <span class="hljs-string">"daf363c0-918f-11e5-8994-feff819cdc9f"</span>,
      <span class="hljs-string">"daf3658c-918f-11e5-8994-feff819cdc9f"</span>
    ]
  </span>}
]
</code></pre>
<h5 id="a-people-document">A <code>people</code> document</h5>
<pre><code class="lang-json">[
  {
    "<span class="hljs-attribute">_id</span>": <span class="hljs-value"><span class="hljs-string">"7602d576-9190-11e5-8994-feff819cdc9f"</span></span>,
    "<span class="hljs-attribute">name</span>": <span class="hljs-value"><span class="hljs-string">"J. K. Rowling"</span></span>,
    "<span class="hljs-attribute">occupation</span>": <span class="hljs-value"><span class="hljs-string">"Novelist"</span></span>,
    "<span class="hljs-attribute">nationality</span>": <span class="hljs-value"><span class="hljs-string">"British"</span></span>,
    "<span class="hljs-attribute">education</span>": <span class="hljs-value"><span class="hljs-string">"Bachelor of Arts"</span></span>,
    "<span class="hljs-attribute">spouse</span>": <span class="hljs-value"><span class="hljs-string">"7602d472-9190-11e5-8994-feff819cdc9f"</span>
  </span>},
  {
    "<span class="hljs-attribute">_id</span>": <span class="hljs-value"><span class="hljs-string">"7602d472-9190-11e5-8994-feff819cdc9f"</span></span>,
    "<span class="hljs-attribute">name</span>": <span class="hljs-value"><span class="hljs-string">"Neil Murray"</span>
  </span>}
]
</code></pre>
<h5 id="query-result-the-result-of-a-query-for-the-above-book-document">Query result: The result of a query for the above <code class="lang-inform7"><span class="hljs-title">book</span></code> document</h5>
<pre><code class="lang-json">{
  "<span class="hljs-attribute">_id</span>": <span class="hljs-value"><span class="hljs-string">"daf35614-918f-11e5-8994-feff819cdc9f"</span></span>,
  "<span class="hljs-attribute">title</span>": <span class="hljs-value"><span class="hljs-string">"Harry Potter and the Philosopher's Stone"</span></span>,
  "<span class="hljs-attribute">author</span>": <span class="hljs-value">{
    "<span class="hljs-attribute">_id</span>": <span class="hljs-value"><span class="hljs-string">"7602d576-9190-11e5-8994-feff819cdc9f"</span></span>,
    "<span class="hljs-attribute">name</span>": <span class="hljs-value"><span class="hljs-string">"J. K. Rowling"</span></span>,
    "<span class="hljs-attribute">occupation</span>": <span class="hljs-value"><span class="hljs-string">"Novelist"</span></span>,
    "<span class="hljs-attribute">nationality</span>": <span class="hljs-value"><span class="hljs-string">"British"</span></span>,
    "<span class="hljs-attribute">education</span>": <span class="hljs-value"><span class="hljs-string">"Bachelor of Arts"</span></span>,
    "<span class="hljs-attribute">spouse</span>": <span class="hljs-value">{
      "<span class="hljs-attribute">_id</span>": <span class="hljs-value"><span class="hljs-string">"7602d472-9190-11e5-8994-feff819cdc9f"</span></span>,
      "<span class="hljs-attribute">name</span>": <span class="hljs-value"><span class="hljs-string">"Neil Murray"</span>
    </span>}</span>,
    "<span class="hljs-attribute">composed</span>": <span class="hljs-value">{
      "<span class="hljs-attribute">spouse</span>": <span class="hljs-value"><span class="hljs-string">"7602d472-9190-11e5-8994-feff819cdc9f"</span>
    </span>}
  </span>}</span>,
  "<span class="hljs-attribute">booksInSeries</span>": <span class="hljs-value">[
    {
      "<span class="hljs-attribute">_id</span>": <span class="hljs-value"><span class="hljs-string">"daf35998-918f-11e5-8994-feff819cdc9f"</span></span>,
      "<span class="hljs-attribute">title</span>": <span class="hljs-value"><span class="hljs-string">"Harry Potter and the Chamber of Secrets"</span></span>,
      "<span class="hljs-attribute">author</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">_id</span>": <span class="hljs-value"><span class="hljs-string">"7602d576-9190-11e5-8994-feff819cdc9f"</span></span>,
        "<span class="hljs-attribute">name</span>": <span class="hljs-value"><span class="hljs-string">"J. K. Rowling"</span></span>,
        "<span class="hljs-attribute">occupation</span>": <span class="hljs-value"><span class="hljs-string">"Novelist"</span></span>,
        "<span class="hljs-attribute">nationality</span>": <span class="hljs-value"><span class="hljs-string">"British"</span></span>,
        "<span class="hljs-attribute">education</span>": <span class="hljs-value"><span class="hljs-string">"Bachelor of Arts"</span></span>,
        "<span class="hljs-attribute">spouse</span>": <span class="hljs-value">{
          "<span class="hljs-attribute">_id</span>": <span class="hljs-value"><span class="hljs-string">"7602d472-9190-11e5-8994-feff819cdc9f"</span></span>,
          "<span class="hljs-attribute">name</span>": <span class="hljs-value"><span class="hljs-string">"Neil Murray"</span>
        </span>}</span>,
        "<span class="hljs-attribute">composed</span>": <span class="hljs-value">{
          "<span class="hljs-attribute">spouse</span>": <span class="hljs-value"><span class="hljs-string">"7602d472-9190-11e5-8994-feff819cdc9f"</span>
        </span>}
      </span>}
    </span>}
  ]</span>,
  "<span class="hljs-attribute">composed</span>": <span class="hljs-value">{
    "<span class="hljs-attribute">author</span>": <span class="hljs-value"><span class="hljs-string">"7602d576-9190-11e5-8994-feff819cdc9f"</span></span>,
    "<span class="hljs-attribute">booksInSeries</span>": <span class="hljs-value">[
      <span class="hljs-string">"daf35998-918f-11e5-8994-feff819cdc9f"</span>
    ]
  </span>}
</span>}
</code></pre>
<h2 id="collection-statistics">Collection Statistics</h2>
<p>Collection statistics from MongoDB can be retrieved by sending a GET request to a collection’s <code>/stats</code> endpoint.</p>
<p>An example request:</p>
<pre><code class="lang-http"><span class="hljs-request">GET <span class="hljs-string">/1.0/library/books/stats</span> HTTP/1.1</span>
<span class="hljs-attribute">Host</span>: <span class="hljs-string">api.example.com</span>
<span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">application/json</span>
<span class="hljs-attribute">Cache-Control</span>: <span class="hljs-string">no-cache</span>
</code></pre>
<p>An example response:</p>
<pre><code class="lang-json">{
  "<span class="hljs-attribute">count</span>": <span class="hljs-value"><span class="hljs-number">2</span></span>,
  "<span class="hljs-attribute">size</span>": <span class="hljs-value"><span class="hljs-number">480</span></span>,
  "<span class="hljs-attribute">averageObjectSize</span>": <span class="hljs-value"><span class="hljs-number">240</span></span>,
  "<span class="hljs-attribute">storageSize</span>": <span class="hljs-value"><span class="hljs-number">8192</span></span>,
  "<span class="hljs-attribute">indexes</span>": <span class="hljs-value"><span class="hljs-number">1</span></span>,
  "<span class="hljs-attribute">totalIndexSize</span>": <span class="hljs-value"><span class="hljs-number">8176</span></span>,
  "<span class="hljs-attribute">indexSizes</span>": <span class="hljs-value">{ "<span class="hljs-attribute">_id_</span>": <span class="hljs-value"><span class="hljs-number">8176</span> </span>}
</span>}
</code></pre>
<h2 id="available-collections">Available Collections</h2>
<p>A document containing information about the available collections can be retrieved by sending a GET request to the API’s <code class="lang-gradle"><span class="hljs-regexp">/api/</span>collections</code> endpoint.</p>
<p><strong>Example request</strong></p>
<pre><code class="lang-http"><span class="hljs-request">GET <span class="hljs-string">/api/collections</span> HTTP/1.1</span>
<span class="hljs-attribute">Host</span>: <span class="hljs-string">api.example.com</span>
<span class="hljs-attribute">Content-Type</span>: <span class="hljs-string">application/json</span>
<span class="hljs-attribute">Cache-Control</span>: <span class="hljs-string">no-cache</span>
</code></pre>
<p><strong>Example response</strong></p>
<pre><code class="lang-json">{
  "<span class="hljs-attribute">collections</span>": <span class="hljs-value">[
    {
      "<span class="hljs-attribute">version</span>": <span class="hljs-value"><span class="hljs-string">"1.0"</span></span>,
      "<span class="hljs-attribute">database</span>": <span class="hljs-value"><span class="hljs-string">"library"</span></span>,
      "<span class="hljs-attribute">name</span>": <span class="hljs-value"><span class="hljs-string">"books"</span></span>,
      "<span class="hljs-attribute">slug</span>": <span class="hljs-value"><span class="hljs-string">"books"</span></span>,
      "<span class="hljs-attribute">path</span>": <span class="hljs-value"><span class="hljs-string">"/1.0/library/books"</span>
    </span>},
    {
      "<span class="hljs-attribute">version</span>": <span class="hljs-value"><span class="hljs-string">"1.0"</span></span>,
      "<span class="hljs-attribute">database</span>": <span class="hljs-value"><span class="hljs-string">"library"</span></span>,
      "<span class="hljs-attribute">name</span>": <span class="hljs-value"><span class="hljs-string">"user"</span></span>,
      "<span class="hljs-attribute">slug</span>": <span class="hljs-value"><span class="hljs-string">"user"</span></span>,
      "<span class="hljs-attribute">path</span>": <span class="hljs-value"><span class="hljs-string">"/1.0/library/users"</span>
    </span>},
    {
      "<span class="hljs-attribute">version</span>": <span class="hljs-value"><span class="hljs-string">"1.0"</span></span>,
      "<span class="hljs-attribute">database</span>": <span class="hljs-value"><span class="hljs-string">"library"</span></span>,
      "<span class="hljs-attribute">name</span>": <span class="hljs-value"><span class="hljs-string">"author"</span></span>,
      "<span class="hljs-attribute">slug</span>": <span class="hljs-value"><span class="hljs-string">"author"</span></span>,
      "<span class="hljs-attribute">path</span>": <span class="hljs-value"><span class="hljs-string">"/1.0/library/authors"</span>
    </span>}
  ]
</span>}
</code></pre>



            <p class="cf bdr__top bdr--bdr-grey pad__top pad__bottom small marg__top--x2">
              See something to improve? <a target="_blank" href="http://github.com/dadi/docs/edit/master/_src/api/concepts/collections.md">Edit in Github</a>.
            </p>
          </div>
        </div>
         <div class="col w-1-4">
          <div class="pad__top--half stick" stick-spacer="false" stick-parent=".container">
            <ul class="hide list--line small bg--light-grey" style="padding:5px 15px">
                <li>
                  <strong class="txt--grey block">Prev</strong>
                  <a href="/api/concepts/authentication">Authentication</a>
                </li>
                <li>
                  <strong class="txt--grey block">Next</strong>
                  <a href="/api/concepts/custom">Custom Endpoints</a>
                </li>
            </ul>

            <ul class="list--line pad__top--half">
                <li><a class="" href="#collection-specification">Collection Specification</a></li>
                <li><a class="" href="#field-specification">Field Specification</a></li>
                <li><a class="" href="#field-types">Field Types</a></li>
                <li><a class="" href="#collection-settings">Collection Settings</a></li>
                <li><a class="" href="#validation">Validation</a></li>
                <li><a class="" href="#database-indexes">Database Indexes</a></li>
                <li><a class="" href="#document-revision-history">Document Revision History</a></li>
                <li><a class="" href="#document-composition">Document Composition</a></li>
                <li><a class="" href="#collection-statistics">Collection Statistics</a></li>
                <li><a class="" href="#available-collections">Available Collections</a></li>
            </ul>
        </div>
      </div>
    </div>
</main>

<div class="footer bg--light-grey bdr__top bdr--bdr-grey pad__top--x2 pad__bottom--x2">
  <footer class="small container">
    <div class="bdr__bottom bdr--bdr-grey marg__bottom--x2 pad__bottom">
      <div class="grid feed">
        <div class="col w-1-2">
        <p class="normal"><strong>The Feed</strong> provides the latest news and releases from DADI along with a collection of the best industry news, resources and inspiration from around the web, curated by us.</p>
        </div>
        <div class="col w-1-2 normal pad__top">
          <form action="http://dadi.createsend.com/t/d/s/irhyjh/" method="post">
            <p class="no-marg-i pad--half txt--grey">Get <strong>The Feed</strong> in your inbox</p>
            <input type="text" name="cm-irhyjh-irhyjh" class="email text" placeholder="Your email address"><button class="btn btn--blue" type="submit">Subscribe</button>
          </form>
        </div>
      </div>
    </div>
    <div class="grid">
      <div class="col w-1-3 pad__bottom">
        <ul class="list--line normal txt--blue">
          <li><a href="https://dadi.tech/contact/">Contact us</a></li>
          <li><a href="https://dadi.tech/success-stories/">Success stories</a></li>
          <li><a href="https://dadi.tech/latest/">Latest</a></li>
          <li><a href="https://dadi.tech/on-demand/">On demand</a></li>
          <li><a href="https://dadi.tech/about/">Working with DADI</a>
          <li><a href="https://dadi.tech/privacy/">Privacy</a></li>
        </ul>
      </div>
      <div class="col w-1-3 pad__bottom">
        <p class="normal hdr"><a href="https://dadi.tech/platform/">Platform</a></p>
        <ul class="list--line">
          <li>
            <a href="https://dadi.tech/platform/api/" class="fwb">
            <img src="https://dadi.tech/assets/products/dadi-api.png" class="alignv float--right" width="15">
            API
            </a>
          </li>
          <li>
            <a href="https://dadi.tech/platform/web/" class="fwb">
            <img src="https://dadi.tech/assets/products/dadi-web.png" class="alignv float--right" width="19">
            Web
            </a>
          </li>
          <li>
            <a href="https://dadi.tech/platform/publish/" class="fwb">
            <img src="https://dadi.tech/assets/products/dadi-publish.png" class="alignv float--right" width="15">
            Publish
            </a>
          </li>
          <li>
            <a href="https://dadi.tech/platform/cdn/" class="fwb">
            <img src="https://dadi.tech/assets/products/dadi-cdn.png" class="alignv float--right" width="15">
            CDN
            </a>
          </li>
          <li><a href="https://dadi.tech/platform/concepts/">Concepts</a></li>
          <li><a href="https://dadi.tech/platform/security/">Security</a></li>
          <li><a href="https://dadi.tech/platform/roadmap/">Roadmap</a></li>
          <li>
            <a href="http://docs.dadi.tech" target="_blank">
            <img src="https://dadi.tech/assets/icons/pop-out.svg" class="alignv float--right" width="15">
            Documentation
            </a>
          </li>
        </ul>
      </div>
      <div class="col w-1-3 pad__bottom">
        <p class="normal hdr"><a href="https://dadi.tech/solutions/">Solutions</a></p>
        <ul class="list--line">
          <li><a href="https://dadi.tech/solutions/data-strategy/">Data strategy</a></li>
          <li><a href="https://dadi.tech/solutions/publishing/">Publishing</a></li>
          <li><a href="https://dadi.tech/solutions/product-development/">Product development</a></li>
          <li><a href="https://dadi.tech/solutions/crm/">CRM</a></li>
          <li><a href="https://dadi.tech/solutions/analytics/">Analytics</a></li>
          <li><a href="https://dadi.tech/solutions/content-personalisation/">Content personalisation</a></li>
          <li><a href="https://dadi.tech/solutions/commerce/">Commerce</a></li>
        </ul>
      </div>
    </div>

    <div class="marg__top--x2 pad__top pad__bottom alignc">
      <ul class="list--inline block marg__bottom--x2">
        <li class="fwb">© DADI+ Ltd.</li>
        <li><a href="https://twitter.com/dadi">Follow us on Twitter</a></li>
        <li><a href="https://github.com/dadi">Find us on Github</a></li>
        <li><a href="https://github.com/dadi/docs">View the repo for this site</a></li>
      </ul>
      <img src="https://dadi.tech/assets/img/d.svg" class="marg__right--x2 alignv" width="45">
    </div>
  </footer>
</div>

<script src="http://dadi.tech/assets/js/pattern.min.js"></script>
<script src="http://dadi.tech/assets/js/main.js?v=2"></script>
<script src="/assets/lunr.js"></script>

<script>
var allPageData
var idx

var debounce = function (fn) {
  var timeout
  return function () {
    var args = Array.prototype.slice.call(arguments),
        ctx = this

    clearTimeout(timeout)
    timeout = setTimeout(function () {
      fn.apply(ctx, args)
    }, 100)
  }
}

$(document).ready(function() {
  $.getJSON('data.json', function (allData) {
    allPageData = allData

    $.getJSON('searchIndex.json', function (data) {
      idx = lunr.Index.load(data)

      $('input').bind('keyup', debounce(function () {
        if ($(this).val()) {
          $("#results").removeClass('hide')
          if ($(this).val() < 2) return
          var query = $(this).val()
          var results = idx.search(query)

          results = results.map(function (result) {
            return allPageData.filter(function (page) { return page.path === result.ref })[0]
          })

          renderResults(results)
        } else {
          $("#results").addClass('hide')
        }
      }))
    })
  })
})

var renderResults = function (results) {
  $("#results").empty()

  if (results.length) {
    console.log(results);

    results.forEach(function(result) {
      $("#results").append('<li><a href="' + result.path + '"><h2 class="txt--blue block medium hdr no-marg-i pad__bottom--half">' + result.title + '</h2><div class="no-marg small">' + $(result.excerpt).text() + '</div><div class="txt--grey small no-marg pad__top--half">' + result.path + '</div></a></li>')
    })
  } else {
    $("#results").append('<li>No results found.</li>');
  }
}

</script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-42395806-3', 'auto');
  ga('send', 'pageview');
</script>

</body>
</html>